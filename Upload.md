## 文件上传
fileUpload
提交表单的方式为post
提交表单的控件
表单的数据提交的编码格式必须改为二进制
enctype="multipart/form-data"

表单使用二进制提交数据的时候
在servlet无法通过req.getparament()获取数据

Scanner(req.getInputStream)

细节:
文件名相同的情况下
服务器上的数据被覆盖了
使用UUID生成唯一的字符串作为文件的名称

修改文件保存到项目下
目前文件时直接保存到磁盘中的某个目录下的
如果想通过HTTP协议是无法访问到的
http协议只能访问项目下的资源

动态获取/upload的绝对路径
文件存在项目下

## 缓存大小和临时目录
文件根据大小来判断是否存在在内存中或者临时目录中
默认缓存大小:4KB
默认临时目录:tomcat/temp目录下
可以设置缓存大小

## 文件类型的约束
通过文件的拓展名来限制是否保存文件
把所有允许的类型先定义好
String ALLOW_TYPE="png;jpg"

## 设置文件的大小
超过设置的文件大小限制会报错
处理异常,告诉用户
跳转

## 文件下载
获取用户需要下载的文件名称
业务处理 扣分 判断是否有登陆等操作
给文件给推荐名,下载时作为默认名称
resp.setheader();
//通知用户是否选择下载,而不是直接打开文件
resp.setContendtType();
//注意,浏览器使用iso-8829-1的编码,而我们使用utf-8
new String( );

获取文件所在的目录和文件名
Files 文件工具类
使用File工具类,把源拷贝到目标
Files.copy(源,目标);//一流一文件
Paths.get(目录,文件名);

## 禁止直接访问(文件下载安全性)
把文件放在/WEB-INF里面,不能直接访问

## 防止表单重复提交
表单重复提交的根本原因是没有完整地完成
## 请求表单页面
## 提交表单数据

在InputServlet中往session中设置一个token令牌
跳转到transfer.jsp中在表单隐藏域中加入一个token的数据
把transfer中的所有数据带到TransferServlet中
判断 表单带来的token值和session中的值是否相同
相同:两次完整的请求,可以做业务处理
    注意:完成后要销毁sesion中的token值
不同:不处理

## 验证码
针对于网络上的一些门户网站就需要验证码
企业的内部管理网站不需要验证码

## 如何使用验证码
书写Login.jsp
修改LoginServlet  
销毁session的目的是防止验证码被下一个用户拿去使用

验证码看不清楚的时候只能刷新页面
需要直接点击验证码就换一个新的
onclick

## 小结
文件上传的准备
FileUpload
文件名和保存路径
文件类型约束
防止表单的重复提交
